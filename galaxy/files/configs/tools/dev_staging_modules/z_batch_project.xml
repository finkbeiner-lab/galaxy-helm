<tool id="z_batch_project_dev" name="Batch z-project montaged images or panels." version="0.1">

<description>Generates z-projections for each specified channel.</description>

<command interpreter="python">
#if str($process_mode) == 'multiprocessing': 
	z_batch_project_mp.py
#else:
	z_batch_project_distributed.py
#end if	

$infile $input_image_path $output_results_path $projection_type "$channel_list" $outfile

</command>

<inputs>
<param name="infile" type="data" format="data" label="Local variables dictionary (output from 'Create Folders')."/>
<param name="process_mode" type="select" label="Select a processing mode" help="Multiprocessing use all the cores in one node while Distributed use all the cores in all nodes in the cluster">
            <option value="multiprocessing" selected='true'>MultiProcessing</option>
            <option value="distributed">Distributed</option>
</param>	
<param name="input_image_path" type="text" format="text" value="/finkbeiner/imaging/smb-robodata/your_folders" size="70" label="Enter path to images(raw or montaged) you would like to z-project." help="Note that RoboData/your_folders = /finkbeiner/imaging/smb-robodata/your_folders"/>
<param name="output_results_path" type="text" format="text" value="/finkbeiner/imaging/smb-robodata/your_folders" size="70" label="Enter path to output destination." help="Note that RoboData/your_folders = /finkbeiner/imaging/smb-robodata/your_folders"/>
<param name="projection_type" type="select" label="Select projection calculation" help="Select operation to use in generating one image from all available z-depths.">
            <option value="max_proj" selected="true"  >Maximum</option>
            <option value="avg_proj"  	    		  >Average</option>
            <option value="sum_proj"				  >Sum</option>
</param>
<param name="channel_list" type="text" format="text" label="Without spaces, separated by commas, enter the channels(full channel names) you would like to z-project. Duplicates will be removed." help="Ex. RFP-DFTrCy5, FITC-DFTrCy5, Epi-RFP16"/>
</inputs>

<outputs>
<data name="outfile" type="data" format="data" label="Z-Project Result"/>
</outputs>

<help>
Takes input directory - where input data is stored on the server.
Takes output directory - where the output will be stored.
Computes individual projection images for z-planes in the input directory.
Writes individual z-projection files to output directory. 
</help>

</tool>
