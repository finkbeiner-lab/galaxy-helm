<tool id="align-validate" name="Alignment Validation">

<description>Evaluates alignment quality per well.</description>

<command interpreter="python">
alignment_validation.py $path_to_aligned_images $morphology_channel $validation_metric $csv_flag $outfile

#if str($well_args) !='':
   --chosen_wells '$well_args'
#end if
</command>

<inputs>
<param name="path_to_aligned_images" type="text" format="text" label="Path to directory containing aligned images."/>
<param name="morphology_channel" type="text" format="text" label="Enter morphology channel identifier. This should match the characters in filename." help="Ex. RFP, FITC, Green, 607"/>


<param name="well_args" type="text" format="text" value="" size="70" label="Optional: Enter wells you would like analyzed, separated by commas. Duplicates will be removed." help="Ex. A1,A8,A8,A10,H11,H1" optional="true"/>
<param name="validation_metric" type="select" label="Optional: Select validation metric" help="Select method by which to evaluate alignment.">
            <option value="border" selected="true"  	>Image shift</option>
            <option value="avg_persistence"             >Average cell persistence time</option>
            <option value="max_persistence"             >Maximum cell persistence time</option>
</param>
<param name="csv_flag" type="boolean" checked="true" truevalue="True" falsevalue="False" label="CSV output" help="Select whether you would like to produce csv output." />
</inputs>

<outputs>
<data name="outfile" type="text" format="text" label="Alignment Validation Result"/>
</outputs>

<help>
Returns wells that are poorly aligned in order from worst to best.
</help>
</tool>